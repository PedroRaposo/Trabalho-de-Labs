# -*- coding: utf-8 -*-
"""
Created on Wed Dec 16 14:30:38 2015

@author: Mafalda
"""


from Bio import Entrez
from Bio import SeqIO


Entrez.email = "mafaldasap@gmail.com"     # Always tell NCBI who you are
handle = Entrez.egquery(term="Treponema pallidum subsp. pallidum")
record = Entrez.read(handle)
for row in record["eGQueryResult"]:
    if row["DbName"]=="pubmed":
        print(row["Count"]) # conta o n√∫mero de artigos para Treponema pallidum subsp. pallidum
        

handle2 = Entrez.esearch(db="pubmed", term="Treponema pallidum subsp. pallidum", retmax=159)
record2 = Entrez.read(handle2)
IdList = record2["IdList"] # cria lista com IDs dos artigos
print(IdList)
IdList20 = record2["IdList"][:20]
print(IdList20) # cria lista com IDs dos 20 primeiros artigos



from Bio import Medline
handle3 = Entrez.efetch(db="pubmed", id=IdList20, rettype="medline",
                           retmode="text")
records = Medline.parse(handle3)
records = list(records)

for record in records:
    print("ID:", record.get("PMID", "?"))
    print("Title:", record.get("TI", "?"))
    print("Authors:", record.get("AU", "?"))
    print("Source:", record.get("SO", "?"))
    print("")
    
    
filename = "pubmed_lista.txt"
save_file = open(filename, "w")
for line in records:
    save_file.write(str(line))
save_file.close()


